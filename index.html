<!doctype html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>데구르르 (Degururu)</title>
    <link rel="stylesheet" href="./styles.css" />
  </head>
  <body>
    <div id="app">
      <header class="topbar">
        <div class="topbar__left brand">
          <div class="brand__title">데구르르 (Degururu)</div>
          <div class="brand__subtitle">공으로 즐기는 핀볼 사다리</div>
        </div>
        <div class="topbar__center">
          <button id="start-btn" class="btn btn--primary topbar__start" type="button">게임 시작</button>
          <button id="pause-btn" class="btn btn--ghost topbar__pause" type="button" disabled>일시정지</button>
        </div>
        <div class="topbar__right">
          <div class="bgmControl">
            <button id="bgm-btn" class="bgmControl__toggle" type="button" aria-pressed="false">
              <span data-bgm-label>BGM 끔</span>
            </button>
            <button
              id="bgm-settings-btn"
              class="bgmControl__gear"
              type="button"
              aria-label="BGM 트랙 선택"
              aria-haspopup="menu"
              aria-expanded="false"
              title="BGM 선택"
            >
              <svg viewBox="0 0 24 24" aria-hidden="true">
                <path
                  d="M19.43 12.98a7.83 7.83 0 0 0 .06-.98 7.83 7.83 0 0 0-.06-.98l2.11-1.65a.5.5 0 0 0 .12-.64l-2-3.46a.5.5 0 0 0-.6-.22l-2.49 1a7.14 7.14 0 0 0-1.69-.98l-.38-2.65A.5.5 0 0 0 14 1h-4a.5.5 0 0 0-.49.42l-.38 2.65c-.6.23-1.16.56-1.68.98l-2.5-1a.5.5 0 0 0-.6.22l-2 3.46a.5.5 0 0 0 .12.64l2.11 1.65A7.83 7.83 0 0 0 4.51 12c0 .33.02.66.06.98l-2.11 1.65a.5.5 0 0 0-.12.64l2 3.46a.5.5 0 0 0 .6.22l2.5-1c.52.42 1.08.75 1.68.98l.38 2.65A.5.5 0 0 0 10 23h4a.5.5 0 0 0 .49-.42l.38-2.65c.6-.23 1.16-.56 1.69-.98l2.49 1a.5.5 0 0 0 .6-.22l2-3.46a.5.5 0 0 0-.12-.64zM12 15.5A3.5 3.5 0 1 1 12 8a3.5 3.5 0 0 1 0 7.5z"
                />
              </svg>
            </button>
            <div id="bgm-menu" class="bgmMenu" role="menu" hidden>
              <button type="button" class="bgmMenu__item" data-bgm-track="bgm_1" role="menuitemradio" aria-checked="true">BGM 1</button>
              <button type="button" class="bgmMenu__item" data-bgm-track="bgm_2" role="menuitemradio" aria-checked="false">BGM 2</button>
            </div>
          </div>
          <button id="inquiry-btn" class="btn btn--ghost" type="button">문의</button>
        </div>
      </header>

      <main class="stage">
        <div class="hud">
          <div class="mini">
            <div class="mini__row">
              <div class="mini__title" id="minimap-title">미니맵</div>
              <label class="switch" title="켜면 후미 공을 따라갑니다. 끄면 자유 시점으로 미니맵으로 이동합니다.">
                <span class="switch__label">시점 고정</span>
                <input id="view-lock" class="switch__input" type="checkbox" role="switch" disabled />
                <span class="switch__track" aria-hidden="true"><span class="switch__thumb"></span></span>
              </label>
            </div>
            <canvas id="minimap" width="260" height="190"></canvas>
            <div class="mini__hint" id="minimap-hint">미니맵을 클릭해 이동. 후미 추적으로 자동 추적을 재개합니다.</div>
          </div>
          <div class="hud__actions">
            <button id="settings-btn" class="btn btn--ghost" type="button">공 설정</button>
            <button id="winner-btn" class="btn btn--ghost" type="button" disabled>마지막 결과</button>
          </div>
          <div class="balls" id="balls"></div>
        </div>

        <div class="board">
          <canvas id="game" width="900" height="1350"></canvas>
          <div class="board__coords">
            <div class="board__coordText" id="canvas-coord-readout">xFrac: -, yFrac: -</div>
            <button id="canvas-coord-copy" class="btn btn--ghost board__copy" type="button" disabled>좌표 복사</button>
          </div>
        </div>
      </main>
    </div>

    <dialog id="settings-dialog" class="dialog dialog--settings">
      <form method="dialog" class="twModal" id="settings-form">
        <div class="twModal__card">
          <div class="twModal__header">
            <div class="twModal__headText">
              <div class="twModal__title">공 설정</div>
              <div class="twModal__desc">공을 추가/삭제하고, 이름과 이미지를 바꿀 수 있어요.</div>
            </div>
            <button class="twModal__close" value="close" type="submit" formnovalidate aria-label="닫기">×</button>
          </div>

          <div class="twModal__body">
            <div class="twList" id="settings-list"></div>
          </div>

          <div class="twModal__footer">
            <button id="add-ball" class="btn btn--ghost" type="button">공 추가</button>
            <button id="restore-defaults" class="btn btn--ghost" type="button">기본값 복원</button>
            <button class="btn btn--primary" value="close" type="submit">닫기</button>
          </div>
        </div>
      </form>
    </dialog>

    <dialog id="inquiry-dialog" class="dialog dialog--settings">
      <form method="dialog" class="twModal" id="inquiry-form">
        <div class="twModal__card">
          <div class="twModal__header">
            <div class="twModal__headText">
              <div class="twModal__title">문의하기</div>
              <div class="twModal__desc">문의 내용을 안전하게 전송합니다.</div>
            </div>
            <button class="twModal__close" value="close" type="submit" formnovalidate aria-label="닫기">×</button>
          </div>

          <div class="twModal__body">
            <div class="inquiryForm">
              <div class="field">
                <label for="inq-name">이름</label>
                <input id="inq-name" name="name" type="text" maxlength="40" required autocomplete="name" placeholder="홍길동" />
              </div>
              <div class="field">
                <label for="inq-email">이메일</label>
                <input id="inq-email" name="email" type="email" maxlength="120" required autocomplete="email" placeholder="you@example.com" />
              </div>
              <div class="field">
                <label for="inq-subject">제목</label>
                <input id="inq-subject" name="subject" type="text" maxlength="80" required placeholder="문의 제목" />
              </div>
              <div class="field">
                <label for="inq-message">내용</label>
                <textarea id="inq-message" name="message" rows="6" maxlength="2000" required placeholder="문의 내용을 작성해 주세요."></textarea>
                <div class="inquiryCounter"><span id="inq-message-count">0</span>/2000</div>
              </div>
              <div class="inquiryHoneypot" aria-hidden="true">
                <label for="inq-website">웹사이트</label>
                <input id="inq-website" name="website" type="text" tabindex="-1" autocomplete="off" />
              </div>
              <div id="inquiry-status" class="inquiryStatus" aria-live="polite"></div>
            </div>
          </div>

          <div class="twModal__footer">
            <button id="inquiry-send" class="btn btn--primary" type="submit">메일 보내기</button>
          </div>
        </div>
      </form>
    </dialog>

    <dialog id="winner-dialog" class="dialog dialog--winner">
      <form method="dialog" class="twModal" id="winner-form">
        <div class="twModal__card">
          <div class="twModal__header">
            <div class="twModal__headText">
              <div class="twModal__title">마지막 결과</div>
              <div class="twModal__desc">마지막으로 도착한 공을 확인하세요.</div>
            </div>
            <button class="twModal__close" value="close" type="submit" aria-label="닫기">×</button>
          </div>

          <div class="twModal__body">
            <div class="twWinner">
              <div class="twWinner__thumb">
                <img id="winner-img" src="data:," alt="" />
              </div>
              <div class="twWinner__copy">
                <div class="twWinner__k">마지막 도착</div>
                <div class="twWinner__v" id="winner-name"></div>
              </div>
            </div>
          </div>

          <div class="twModal__footer">
            <button class="btn btn--primary" value="close" type="submit">확인</button>
          </div>
        </div>
      </form>
    </dialog>

    <script type="module" src="./src/main.js"></script>
  </body>
</html>
