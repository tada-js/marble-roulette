<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Marble Roulette</title>
    <link rel="stylesheet" href="./styles.css" />
  </head>
  <body>
    <div id="app">
      <header class="topbar">
        <div class="brand">
          <div class="brand__title">마블 룰렛</div>
          <div class="brand__subtitle">동물 공으로 즐기는 핀볼 사다리</div>
        </div>
        <div class="topbar__actions">
          <button id="settings-btn" class="btn btn--ghost" type="button">공 설정</button>
          <button id="bgm-btn" class="btn btn--ghost" type="button" aria-pressed="false">BGM 끔</button>
          <button id="reset-btn" class="btn btn--ghost" type="button">초기화</button>
          <button id="winner-btn" class="btn btn--ghost" type="button" disabled>마지막 결과</button>
          <span class="topbar__divider" aria-hidden="true"></span>
          <button id="start-btn" class="btn btn--primary topbar__start" type="button">시작</button>
        </div>
      </header>

      <main class="stage">
        <div class="hud">
          <div class="mini">
            <div class="mini__row">
              <div class="mini__title" id="minimap-title">미니맵</div>
              <label class="switch" title="켜면 후미 공을 따라갑니다. 끄면 자유 시점으로 미니맵으로 이동합니다.">
                <span class="switch__label">시점 고정</span>
                <input id="view-lock" class="switch__input" type="checkbox" role="switch" disabled />
                <span class="switch__track" aria-hidden="true"><span class="switch__thumb"></span></span>
              </label>
            </div>
            <canvas id="minimap" width="260" height="190"></canvas>
            <div class="mini__hint" id="minimap-hint">미니맵을 클릭해 이동. 후미 추적으로 자동 추적을 재개합니다.</div>
          </div>
          <div class="balls" id="balls"></div>
        </div>

        <div class="board">
          <canvas id="game" width="900" height="1350"></canvas>
          <div class="board__coords">
            <div class="board__coordText" id="canvas-coord-readout">xFrac: -, yFrac: -</div>
            <button id="canvas-coord-copy" class="btn btn--ghost board__copy" type="button" disabled>좌표 복사</button>
          </div>
        </div>
      </main>
    </div>

    <dialog id="settings-dialog" class="dialog dialog--settings">
      <form method="dialog" class="twModal" id="settings-form">
        <div class="twModal__card">
          <div class="twModal__header">
            <div class="twModal__headText">
              <div class="twModal__title">공 설정</div>
              <div class="twModal__desc">공을 추가/삭제하고, 이름과 이미지를 바꿀 수 있어요.</div>
            </div>
            <button class="twModal__close" value="close" type="submit" aria-label="닫기">×</button>
          </div>

          <div class="twModal__body">
            <div class="twList" id="settings-list"></div>
          </div>

          <div class="twModal__footer">
            <button id="add-ball" class="btn btn--ghost" type="button">공 추가</button>
            <button id="restore-defaults" class="btn btn--ghost" type="button">기본값 복원</button>
            <button class="btn btn--primary" value="close" type="submit">닫기</button>
          </div>
        </div>
      </form>
    </dialog>

    <dialog id="winner-dialog" class="dialog dialog--winner">
      <form method="dialog" class="twModal" id="winner-form">
        <div class="twModal__card">
          <div class="twModal__header">
            <div class="twModal__headText">
              <div class="twModal__title">마지막 결과</div>
              <div class="twModal__desc">마지막으로 도착한 공을 확인하세요.</div>
            </div>
            <button class="twModal__close" value="close" type="submit" aria-label="닫기">×</button>
          </div>

          <div class="twModal__body">
            <div class="twWinner">
              <div class="twWinner__thumb">
                <img id="winner-img" alt="" />
              </div>
              <div class="twWinner__copy">
                <div class="twWinner__k">마지막 도착</div>
                <div class="twWinner__v" id="winner-name"></div>
              </div>
            </div>
          </div>

          <div class="twModal__footer">
            <button class="btn btn--primary" value="close" type="submit">확인</button>
          </div>
        </div>
      </form>
    </dialog>

    <script type="module" src="./src/main.js"></script>
  </body>
</html>
